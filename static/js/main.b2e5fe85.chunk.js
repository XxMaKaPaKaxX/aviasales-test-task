(this["webpackJsonpaviasales-test-task"]=this["webpackJsonpaviasales-test-task"]||[]).push([[0],{14:function(e,t,c){},15:function(e,t,c){"use strict";c.r(t);var s=c(1),n=c.n(s),a=c(7),i=c.n(a),r=c(8),l=c(2),o=c(3),u=c(0),j=function(e){var t=e.data,c=t.date,s=t.destination,n=t.duration,a=t.origin,i=t.stops,r=new Date(c),l=new Date(Date.parse(c)+6e4*n),j="".concat(Math.floor(n/60),"godz. ").concat(n%60,"min."),d=Object(o.a)(i).length,h=Object(o.a)(i).join(", ");return Object(u.jsxs)("div",{className:"d-flex justify-content-between",children:[Object(u.jsxs)("div",{className:"d-flex flex-column",children:[Object(u.jsxs)("p",{className:"muted",children:[a," - ",s]}),Object(u.jsxs)("p",{children:["".concat(r.getHours(),":").concat(r.getMinutes())," - ","".concat(l.getHours(),":").concat(l.getMinutes())]})]}),Object(u.jsxs)("div",{className:"d-flex flex-column",children:[Object(u.jsx)("p",{className:"muted",children:"Czas lotu"}),Object(u.jsx)("p",{children:j})]}),Object(u.jsxs)("div",{className:"d-flex flex-column",children:[Object(u.jsxs)("p",{className:"muted",children:["".concat(d," przesiadek")," "]}),Object(u.jsx)("p",{children:h})]})]})},d=function(e){var t=e.data,c=t.price,s=t.carrier,n=t.segments,a=Object(l.a)(n,2),i=a[0],r=a[1];return Object(u.jsxs)("div",{className:"ticket bg-light p-3 rounded shadow-4 mb-3",children:[Object(u.jsxs)("div",{className:"ticket-price-and-logo d-flex  justify-content-between mb-2",children:[Object(u.jsxs)("p",{className:"ticket-price",children:[c," \u20bd"]}),Object(u.jsx)("img",{className:"img-fluid",src:"".concat("https://pics.avs.io/99/36","/").concat(s,".png"),alt:""})]}),Object(u.jsx)("div",{className:"destination-ticket ticket-info",children:Object(u.jsx)(j,{data:i})}),Object(u.jsx)("div",{className:"return-ticket ticket-info",children:Object(u.jsx)(j,{data:r})})]})},h=function(e){var t=e.ticketsPack,c=e.amountShowedTickets,s=e.filterCheaperOrFaster,n=e.transfersCheckboxesStatus,a=function(e){var t=function(e){var t=[];for(var c in e)"all"===c&&!0===e[c]?t.push("all"):"without"===c&&!0===e[c]?t.push(0):"one"===c&&!0===e[c]?t.push(1):"two"===c&&!0===e[c]?t.push(2):"three"===c&&!0===e[c]&&t.push(3);return t}(n);return t.includes("all")?e:e.filter((function(e){var c=Object(o.a)(e.segments[0].stops).length,s=Object(o.a)(e.segments[1].stops).length;return t.includes(c)&&t.includes(s)}))}(function(e){switch(s){case"cheapest":return function(e){return e.sort((function(e,t){return e.price-t.price}))}(e);case"fastest":return function(e){return e.sort((function(e,t){return e.segments[0].duration+e.segments[1].duration-(t.segments[0].duration+t.segments[1].duration)}))}(e);default:console.log("some wrong action")}}(t)).slice(0,c).map((function(e,t){return Object(u.jsx)(d,{data:e},t)}));return Object(u.jsx)("div",{className:"tickets",children:a})},b=function(e){var t=e.checkboxStatus,c=e.toggleStatus;return Object(u.jsxs)("div",{className:"transfers-panel d-flex flex-column bg-light py-2 rounded shadow-4",children:[Object(u.jsx)("h4",{className:"text-uppercase px-3",children:"Liczba przesiadek"}),Object(u.jsxs)("div",{className:"input-control px-3",children:[Object(u.jsx)("input",{className:"form-check-input",type:"checkbox",id:"all",checked:t.all,onChange:function(e){return c(e)}}),Object(u.jsx)("label",{className:"form-check-label mx-3",htmlFor:"all",children:"Wszystkie"})]}),Object(u.jsxs)("div",{className:"input-control px-3",children:[Object(u.jsx)("input",{className:"form-check-input",type:"checkbox",id:"without",checked:t.without,onChange:function(e){return c(e)}}),Object(u.jsx)("label",{className:"form-check-label mx-3",htmlFor:"all",children:"Bez przesiadek"})]}),Object(u.jsxs)("div",{className:"input-control px-3",children:[Object(u.jsx)("input",{className:"form-check-input",type:"checkbox",id:"one",checked:t.one,onChange:function(e){return c(e)}}),Object(u.jsx)("label",{className:"form-check-label mx-3",htmlFor:"all",children:"1 przesiadka"})]}),Object(u.jsxs)("div",{className:"input-control px-3",children:[Object(u.jsx)("input",{className:"form-check-input",type:"checkbox",id:"two",checked:t.two,onChange:function(e){return c(e)}}),Object(u.jsx)("label",{className:"form-check-label mx-3",htmlFor:"all",children:"2 przesiadki"})]}),Object(u.jsxs)("div",{className:"input-control px-3",children:[Object(u.jsx)("input",{className:"form-check-input",type:"checkbox",id:"three",checked:t.three,onChange:function(e){return c(e)}}),Object(u.jsx)("label",{className:"form-check-label mx-3",htmlFor:"all",children:"3 przesiadki"})]})]})},m=function(e){var t=e.text,c=e.id,s=e.filterStatus,n=e.click,a=c===s?"btn btn-info py-3":"btn btn-light py-3";return Object(u.jsx)("button",{className:a,onClick:function(){return n(c)},children:t})},x=(c(14),function(){var e="https://front-test.beta.aviasales.ru",t=Object(s.useState)(),c=Object(l.a)(t,2),n=c[0],a=c[1],i=Object(s.useState)([]),o=Object(l.a)(i,2),j=o[0],d=o[1],x=Object(s.useState)(5),f=Object(l.a)(x,2),p=f[0],O=(f[1],Object(s.useState)("cheapest")),k=Object(l.a)(O,2),g=k[0],v=k[1],N=Object(s.useState)({all:!1,without:!1,one:!0,two:!1,three:!1}),w=Object(l.a)(N,2),S=w[0],z=w[1];Object(s.useEffect)((function(){fetch("".concat(e,"/search")).then((function(e){return e.json()})).then((function(e){return a(e.searchId)}))}),[]);var y=function t(){void 0!==n&&fetch("".concat(e,"/tickets?searchId=").concat(n)).then((function(e){return e.json()})).then((function(e){if(!1===e.stop)return t();d(e.tickets)})).catch((function(e){return console.log(e),t()}))};Object(s.useEffect)((function(){return y()}),[n]);var C=function(e){v(e)};return Object(u.jsx)("div",{className:"app m-5",children:Object(u.jsx)("div",{className:"container",children:Object(u.jsxs)("div",{className:"row",children:[Object(u.jsx)("div",{className:"left-panel col-md-4",children:Object(u.jsx)(b,{checkboxStatus:S,toggleStatus:function(e){var t=e.target.getAttribute("id"),c=Object(r.a)({},S);c[t]=!c[t],z(c)}})}),Object(u.jsxs)("div",{className:"right-panel col-md-8",children:[Object(u.jsxs)("div",{className:"btn-group w-100 mb-4",role:"group",children:[Object(u.jsx)(m,{id:"cheapest",text:"Najta\u0144sze",filterStatus:g,click:C}),Object(u.jsx)(m,{id:"fastest",text:"Najszybsze",filterStatus:g,click:C})]}),Object(u.jsx)(h,{ticketsPack:j,amountShowedTickets:p,filterCheaperOrFaster:g,transfersCheckboxesStatus:S})]})]})})})});i.a.render(Object(u.jsx)(n.a.StrictMode,{children:Object(u.jsx)(x,{})}),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.b2e5fe85.chunk.js.map