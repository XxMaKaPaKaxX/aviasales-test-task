{"version":3,"sources":["components/FlightInfo.jsx","components/Ticket.jsx","modules/Tickets.jsx","modules/TransfersControlPanel.jsx","components/FilterBtn.jsx","modules/App.jsx","index.js"],"names":["FlightInfo","data","date","destination","duration","origin","stops","departureTime","Date","arrivalTime","parse","durationInfo","Math","floor","amoutStops","length","witchStops","join","className","getHours","getMinutes","Ticket","price","carrier","segments","homecoming","src","alt","Tickets","ticketsPack","amountShowedTickets","filterCheaperOrFaster","transfersCheckboxesStatus","tickets","arr","filterMatrix","obj","option","push","prepareFiltermatrix","includes","filter","ticket","amountStopsTo","amountStopsFrom","filterByTransfers","sort","a","b","filterByLowestPrice","filterByAmountDuration","console","log","getFilteredByPriceOrTime","slice","map","index","TransfersControlPanel","checkboxStatus","toggleStatus","type","id","checked","all","onChange","e","htmlFor","without","one","two","three","FilterBtn","text","filterStatus","click","btnClass","onClick","App","apiUrl","useState","searchId","setSearchId","setTicketsPack","setFilterCheaperOrFaster","setTransfersCheckboxesStatus","useEffect","fetch","then","resp","json","ticketsSearching","undefined","stop","catch","err","handleClickBtnFilter","event","targetCheckbox","target","getAttribute","newStatus","role","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.b2e5fe85.chunk.js","sourcesContent":["import React from 'react';\n\nconst FlightInfo = ({ data }) => {\n    const { date, destination, duration, origin, stops } = data;\n\n    const departureTime = new Date(date);\n    const arrivalTime = new Date(Date.parse(date) + (duration * 60000));\n    const durationInfo = `${Math.floor(duration / 60)}godz. ${duration % 60}min.`;\n\n    const amoutStops = [...stops].length;\n    const witchStops = [...stops].join(', ');\n\n\n    return (\n        <div className=\"d-flex justify-content-between\">\n            <div className=\"d-flex flex-column\">\n                <p className=\"muted\">{origin} - {destination}</p>\n                <p>\n                    {`${departureTime.getHours()}:${departureTime.getMinutes()}`} - {`${arrivalTime.getHours()}:${arrivalTime.getMinutes()}`}\n                </p>\n            </div>\n            <div className=\"d-flex flex-column\">\n                <p className=\"muted\">Czas lotu</p>\n                <p>{durationInfo}</p>\n            </div>\n            <div className=\"d-flex flex-column\">\n                <p className=\"muted\">{`${amoutStops} przesiadek`} </p>\n                <p>{witchStops}</p>\n            </div>\n        </div>\n    );\n}\n\nexport default FlightInfo;","import React from 'react';\nimport FlightInfo from './FlightInfo';\n\n\nconst Ticket = ({ data }) => {\n\n\n    const { price, carrier, segments } = data;\n    /* console.log(price, carrier, segments) */\n    const [destination, homecoming] = segments\n\n    const commonCarrierLogoUrl = 'https://pics.avs.io/99/36';\n\n    return (\n        <div className=\"ticket bg-light p-3 rounded shadow-4 mb-3\">\n            <div className=\"ticket-price-and-logo d-flex  justify-content-between mb-2\">\n                <p className=\"ticket-price\">{price} ₽</p>\n                <img className=\"img-fluid\" src={`${commonCarrierLogoUrl}/${carrier}.png`} alt=\"\" />\n            </div>\n            <div className=\"destination-ticket ticket-info\">\n                <FlightInfo data={destination} />\n            </div>\n            <div className=\"return-ticket ticket-info\">\n                <FlightInfo data={homecoming} />\n            </div>\n        </div>\n    );\n}\n\nexport default Ticket;","import React from 'react';\nimport Ticket from '../components/Ticket';\n\nconst Tickets = ({ ticketsPack, amountShowedTickets, filterCheaperOrFaster, transfersCheckboxesStatus }) => {\n\n    const filterByLowestPrice = (arr) => {\n        const sortedPack = arr.sort((a, b) => a.price - b.price);\n        return sortedPack;\n    }\n    const filterByAmountDuration = (arr) => {\n        const sortedPack = arr.sort((a, b) => (a.segments[0].duration + a.segments[1].duration) - (b.segments[0].duration + b.segments[1].duration));\n        return sortedPack;\n    }\n\n    const getFilteredByPriceOrTime = (arr) => {\n        switch (filterCheaperOrFaster) {\n            case 'cheapest':\n                return filterByLowestPrice(arr)\n            case 'fastest':\n                return filterByAmountDuration(arr)\n            default:\n                console.log('some wrong action')\n                break;\n        }\n    }\n\n    const prepareFiltermatrix = (obj) => {\n        const filterMatrix = [];\n        for (const option in obj) {\n            if (option === \"all\" && obj[option] === true) {\n                filterMatrix.push(\"all\");\n            } else if (option === \"without\" && obj[option] === true) {\n                filterMatrix.push(0);\n            } else if (option === \"one\" && obj[option] === true) {\n                filterMatrix.push(1);\n            } else if (option === \"two\" && obj[option] === true) {\n                filterMatrix.push(2);\n            } else if (option === \"three\" && obj[option] === true) {\n                filterMatrix.push(3);\n            }\n        }\n        return filterMatrix;\n    }\n\n    const filterByTransfers = (arr) => {\n        const filterMatrix = prepareFiltermatrix(transfersCheckboxesStatus);\n        if (filterMatrix.includes('all')) {\n            return arr;\n        }\n\n        const result = arr.filter(ticket => {\n            const amountStopsTo = [...(ticket.segments[0].stops)].length   //wtf bez rest operatora length nie działa\n            const amountStopsFrom = [...(ticket.segments[1].stops)].length\n            return (filterMatrix.includes(amountStopsTo) && filterMatrix.includes(amountStopsFrom))\n        })\n        return result;\n    }\n\n    const filteredTickets = filterByTransfers(getFilteredByPriceOrTime(ticketsPack));\n\n    const tickets = filteredTickets.slice(0, amountShowedTickets)\n        .map((ticket, index) => <Ticket key={index} data={ticket} />)\n\n\n    return (\n        <div className=\"tickets\">\n            {tickets}\n        </div>\n    );\n}\n\nexport default Tickets;","import React from 'react';\n\nconst TransfersControlPanel = ({ checkboxStatus, toggleStatus }) => {\n    return (\n        <div className=\"transfers-panel d-flex flex-column bg-light py-2 rounded shadow-4\">\n            <h4 className=\"text-uppercase px-3\">Liczba przesiadek</h4>\n            <div className=\"input-control px-3\">\n                <input\n                    className=\"form-check-input\"\n                    type=\"checkbox\"\n                    id=\"all\"\n                    checked={checkboxStatus.all}\n                    onChange={(e) => toggleStatus(e)}\n                />\n                <label className=\"form-check-label mx-3\" htmlFor=\"all\">Wszystkie</label>\n            </div>\n\n            <div className=\"input-control px-3\">\n                <input\n                    className=\"form-check-input\"\n                    type=\"checkbox\"\n                    id=\"without\"\n                    checked={checkboxStatus.without}\n                    onChange={(e) => toggleStatus(e)}\n                />\n                <label className=\"form-check-label mx-3\" htmlFor=\"all\">Bez przesiadek</label>\n            </div>\n\n            <div className=\"input-control px-3\">\n                <input\n                    className=\"form-check-input\"\n                    type=\"checkbox\"\n                    id=\"one\"\n                    checked={checkboxStatus.one}\n                    onChange={(e) => toggleStatus(e)}\n                />\n                <label className=\"form-check-label mx-3\" htmlFor=\"all\">1 przesiadka</label>\n            </div>\n\n            <div className=\"input-control px-3\">\n                <input\n                    className=\"form-check-input\"\n                    type=\"checkbox\"\n                    id=\"two\"\n                    checked={checkboxStatus.two}\n                    onChange={(e) => toggleStatus(e)}\n                />\n                <label className=\"form-check-label mx-3\" htmlFor=\"all\">2 przesiadki</label>\n            </div>\n\n            <div className=\"input-control px-3\">\n                <input\n                    className=\"form-check-input\"\n                    type=\"checkbox\"\n                    id=\"three\"\n                    checked={checkboxStatus.three}\n                    onChange={(e) => toggleStatus(e)}\n                />\n                <label className=\"form-check-label mx-3\" htmlFor=\"all\">3 przesiadki</label>\n            </div>\n\n        </div>\n    );\n}\n\nexport default TransfersControlPanel;","import React from 'react';\n\nconst FilterBtn = ({ text, id, filterStatus, click }) => {\n    const btnClass = id === filterStatus ? \"btn btn-info py-3\" : \"btn btn-light py-3\";\n    return (\n        <button className={btnClass} onClick={() => click(id)}>{text}</button>\n    );\n}\n\nexport default FilterBtn;","import React, { useEffect, useState } from 'react';\nimport Tickets from './Tickets';\nimport TransfersControlPanel from './TransfersControlPanel';\nimport FilterBtn from '../components/FilterBtn';\n\nimport '../style/App.scss';\n\nconst App = () => {\n  const apiUrl = 'https://front-test.beta.aviasales.ru';\n\n  const [searchId, setSearchId] = useState();\n  const [ticketsPack, setTicketsPack] = useState([]);\n  const [amountShowedTickets, setAmountShowedTickets] = useState(5);\n  const [filterCheaperOrFaster, setFilterCheaperOrFaster] = useState('cheapest');\n\n  const [transfersCheckboxesStatus, setTransfersCheckboxesStatus] = useState({\n    all: false,\n    without: false,\n    one: true,\n    two: false,\n    three: false\n  })\n\n\n  useEffect(() => {\n    fetch(`${apiUrl}/search`)\n      .then(resp => resp.json())\n      .then(resp => setSearchId(resp.searchId))\n  }, []);\n\n  const ticketsSearching = () => {\n    if (searchId === undefined) {\n      return;\n    }\n    fetch(`${apiUrl}/tickets?searchId=${searchId}`)\n      .then(resp => resp.json())\n      .then(resp => {\n        /* console.log(resp.stop) */\n        if (resp.stop === false) {\n          return ticketsSearching()\n        } else {\n          setTicketsPack(resp.tickets)\n        }\n      })\n      .catch(err => {\n        console.log(err);\n        return ticketsSearching();\n      })\n  }\n\n  useEffect(() => ticketsSearching(), [searchId])\n\n  const handleClickBtnFilter = (id) => {\n    setFilterCheaperOrFaster(id);\n  }\n\n  const toggleCheckboxStatus = (event) => {\n    const targetCheckbox = event.target.getAttribute('id');\n    const newStatus = { ...transfersCheckboxesStatus };\n    newStatus[targetCheckbox] = !newStatus[targetCheckbox];\n    setTransfersCheckboxesStatus(newStatus);\n\n  }\n\n  return (\n    <div className=\"app m-5\">\n      <div className=\"container\">\n        <div className=\"row\">\n\n          <div className=\"left-panel col-md-4\">\n            <TransfersControlPanel checkboxStatus={transfersCheckboxesStatus} toggleStatus={toggleCheckboxStatus} />\n          </div>\n\n          <div className=\"right-panel col-md-8\">\n            <div className=\"btn-group w-100 mb-4\" role=\"group\">\n              <FilterBtn\n                id=\"cheapest\"\n                text=\"Najtańsze\"\n                filterStatus={filterCheaperOrFaster}\n                click={handleClickBtnFilter}\n              />\n              <FilterBtn\n                id=\"fastest\"\n                text=\"Najszybsze\"\n                filterStatus={filterCheaperOrFaster}\n                click={handleClickBtnFilter}\n              />\n            </div>\n            <Tickets\n              ticketsPack={ticketsPack}\n              amountShowedTickets={amountShowedTickets}\n              filterCheaperOrFaster={filterCheaperOrFaster}\n              transfersCheckboxesStatus={transfersCheckboxesStatus}\n            />\n          </div>\n\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default App;","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport App from './modules/App';\n\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n"],"sourceRoot":""}